<#macro audit id="audit" filter="" title=loc("event.list")>

    <section class="panel" id="${id?html}">
        <h4>
            ${title?html}
            <#if filter != "" && secSubscriber()>
                <#if subscribed(filter)>
                    <img id="subscription" src="${base}/images/unsubscription.png" class="action" title="<@lh key='subscription.disable' />" audit-subscribed="true" />
                <#else>
                    <img id="subscription" src="${base}/images/subscription.png" class="action" title="<@lh key='subscription.enable' />" audit-subscribed="false" />
                </#if>
            </#if>
        </h4>
        <div id="subscription-notification" class="alert alert-info hidden">
            <span id="subscription-notification-message"></span>
            <button type="button" class="close" onclick="$('#subscription-notification').hide();">&times;</button>
        </div>
        <div id="audit" class="dynamic" dynamic-controller="audit-list" dynamic-more="true" dynamic-filter="${filter}"></div>
     </section>

    <script type="text/javascript">
        require(['app/audit'], function (audit) {
            audit.init('${filter}');
        });
    </script>
</#macro>
