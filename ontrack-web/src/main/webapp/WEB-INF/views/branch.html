<#include "/lib/layout.html">

<@layout_std page="branch" title=branch.name modules=["projects","branches","builds","validation_stamps","audit"] breadcrumbs = {loc("home"): "", branch.project.name?html: "gui/project/${branch.project.name?html}"}>
	<div class="container-fluid">
		<div class="row-fluid">
			<div class="span3">
				<@panel title=branch.project.name+"/"+branch.name>
					<p class="help-block">${branch.description?html}</p>
					<p>
                        <#if secAdmin()>
                            <button class="btn"><@lh key="general.modify" /></button>
                            <button class="btn btn-danger" onclick="Branches.deleteBranch('${branch.project.name?html}','${branch.name?html}')"><@lh key="general.delete" /></button>
                        </#if>
						<a href="gui/project/${branch.project.name?html}" class="btn btn-link"><@lh key="general.close"/></a>
					</p>
				</@panel>
				<@panel title=loc("branch.promotion_levels")>
					TODO Promotion levels
				</@panel>
				<@panel title=loc("branch.validation_stamps")>
					<@validation_stamps project=branch.project.name branch=branch.name create=secAdmin() />
				</@panel>
			</div>
			<div class="span5">
				<@panel title=loc("branches.builds")>
					<@builds project=branch.project.name branch=branch.name />
				</@panel>
			</div>
			<div class="span4">
				<@panel title=loc("event.list")>
					<@audit filter="?branch=${branch.id}" />
				</@panel>
			</div>
		</div>
	</div>
</@layout_std>