<#include "/lib/layout.html">

<@layout_std page="project" title=project.name modules=["projects","branches","audit","properties"] breadcrumbs = {loc("home"): ""}>
	<div class="container-fluid">
        <div class="row-fluid">
            <div class="span12 page-title">
                <span class="title">${project.name?html}</span>
                <span class="action action-optional">
                    <#list extensionProjectActions(project.name) as projectAction>
                        <a href="${projectAction.url?html}" class="<#if projectAction.css??>${projectAction.css?html}</#if>">
                            <#if projectAction.icon??>
                                <i class="${projectAction.icon?html}"></i>
                            </#if>
                            ${projectAction.title?html}
                        </a>
                    </#list>
                    <#if secAdmin()>
                        <span onclick="Projects.updateProject('${project.name?html}')"><i class="icon-pencil"></i> <@lh key="general.modify" /></span>
                        <span onclick="Projects.deleteProject('${project.name?html}')"><i class="icon-trash"></i> <@lh key="general.delete" /></span>
                    </#if>
                    <a href=""><i class="icon-remove"></i> <@lh key="general.close" /></a>
                </span>
            </div>
            <div class="muted">${project.description?html}</div>
            <div class="span12">
                <@properties entity="PROJECT" entityId=project.id />
            </div>
        </div>
        <div class="row-fluid">
            <div class="span3">
                <@panel title=loc("project.branches")>
                    <@branches project=project.name create=secAdmin() />
                </@panel>
            </div>
            <div class="span9">
                <@audit filter="&project=${project.id}" />
            </div>
        </div>
	</div>


    <@dialog id="project-update-dialog">
        <@form_text idPrefix="project-update-dialog-" name="name" label=loc('project.name') />
        <@form_memo idPrefix="project-update-dialog-" name="description" label=loc('project.description') required=false />

        <@dialog_button id="project-update-dialog-submit" class="btn-primary" text=loc('general.modify') />
        <@dialog_button_cancel />
    </@dialog>
</@layout_std>