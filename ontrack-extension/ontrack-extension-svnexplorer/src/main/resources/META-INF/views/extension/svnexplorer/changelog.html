<#include "/lib/layout.html">

<#macro build_info build>
    <h4><a href="gui/project/${build.buildSummary.branch.project.name?html}/branch/${build.buildSummary.branch.name?html}/build/${build.buildSummary.name?html}">${build.buildSummary.name}</a></h4>
    <ul class="svn-history">
        <#list build.history.references as reference>
            <li>
                <a href="${reference.url?html}">${reference.path?html} @ ${reference.revision?html}</a>
                <span class="muted">${reference.time?html}</span>
            </li>
        </#list>
    </ul>
</#macro>

<@layout_std page="svnexplorer.changelog" script=true extension=true>

    <@usermessage />

    <div class="row-fluid">
        <div class="span12 page-title">
                <span class="title">
                    <a href="gui/project/${summary.branch.project.name?html}">${summary.branch.project.name?html}</a>
                    /
                    <a href="gui/project/${summary.branch.project.name?html}/branch/${summary.branch.name?html}">${summary.branch.name?html}</a>
                    /
                    ${summary.buildFrom.buildSummary.name?html}
                    <i class="icon-arrow-right" style="vertical-align: baseline;"></i>
                    ${summary.buildTo.buildSummary.name?html}
                </span>
        </div>
    </div>

    <ul class="nav nav-tabs">
        <li class="active"><a href="#summary" data-toggle="tab"><@lh key="svnexplorer.changelog.summary" /></a></li>
        <li><a href="#revisions" data-toggle="tab"><@lh key="svnexplorer.changelog.revisions" /></a></li>
        <li><a href="#issues" data-toggle="tab"><@lh key="svnexplorer.changelog.issues" /></a></li>
        <li><a href="#files" data-toggle="tab"><@lh key="svnexplorer.changelog.files" /></a></li>
    </ul>

    <div class="tab-content">
        <div class="tab-pane active" id="summary">
            <div class="row-fluid">
                <!-- Build from -->
                <div class="span6 alert alert-info">
                    <@build_info build=summary.buildFrom />
                </div>
                <!-- Build to -->
                <div class="span6 alert alert-info">
                    <@build_info build=summary.buildTo />
                </div>
            </div>
        </div>

        <!-- Revision log -->
        <div class="tab-pane" id="revisions">
        </div>

        <!-- FIXME Issue log -->
        <div class="tab-pane" id="issues">
        </div>

        <!-- FIXME File log -->
        <div class="tab-pane" id="files">
        </div>
    </div>

    <!-- Going back to the branch page -->
    <a href="gui/project/${summary.branch.project.name?html}/branch/${summary.branch.name?html}" class="btn"><@lh key="general.close" /></a>

</@layout_std>